{"version":3,"file":"commonHelpers.js","sources":["../src/img/caution.svg","../src/js/render-functions.js","../src/img/error.svg","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__02852ca5__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iconCaution from '../img/caution.svg';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function showNotification({\n  title = 'Hello',\n  message = 'Type in your message, please',\n  backgroundColor = 'white',\n  icon = iconCaution,\n}) {\n  return iziToast.show({\n    titleSize: '16px',\n    title: `${title}`,\n    message: `${message}`,\n    messageSize: '16px',\n    closeOnEscape: true,\n    position: 'topRight',\n    backgroundColor: `${backgroundColor}`,\n    iconUrl: `${icon}`,\n  });\n}\n\nexport function createGalleryItemMarkup(arr) {\n  const galleryItem = arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery__item\">\n  <a class=\"gallery__link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery__image\"\n      src=\"${webformatURL}\"\n      data-source=\"${largeImageURL}\"\n      alt=\"${tags}\"\n      title=\"${tags}\"\n    />\n   \n  </a>\n   <ul class=\"info\">\n      <li class=\"info__item\">\n        <h3 class=\"info__title\">Likes</h3>\n        <p class=\"info__text\">${likes}</p>\n      </li>\n      <li class=\"info__item\">\n        <h3 class=\"info__title\">Views</h3>\n        <p class=\"info__text\">${views}</p>\n      </li>\n      <li class=\"info__item\">\n        <h3 class=\"info__title\">Comments</h3>\n        <p class=\"info__text\">${comments}</p>\n      </li>\n      <li class=\"info__item\">\n        <h3 class=\"info__title\">Downloads</h3>\n        <p class=\"info__text\">${downloads}</p>\n      </li>\n    </ul>\n</li>`;\n      }\n    )\n    .join('')\n    .trim();\n  return galleryItem;\n}\n\nexport async function createAndRenderGallery(obj) {\n  let gallery = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n  });\n  const markup = createGalleryItemMarkup(obj);\n  const galleryRef = document.querySelector('.gallery');\n  galleryRef.insertAdjacentHTML('beforeend', markup);\n  gallery.refresh();\n}\n","export default \"__VITE_ASSET__8479b7dd__\"","import Axios from 'axios';\nimport { showNotification } from './render-functions';\nimport iconError from '../img/error.svg';\n\n// Error notification object\n\nconst notificationEmptyResponse = {\n  title: 'Error',\n  message:\n    'Sorry, there are no images matching your search query. Please try again!',\n  backgroundColor: '#ef4040',\n  icon: iconError,\n};\n\n// Class PixabayAPI\n\nexport class PixabayAPI {\n  static #KEY = '42204653-dde2ea6d5277704e408fb2018';\n  constructor() {\n    this.BASE_URL = 'https://pixabay.com/api/';\n    this.q = null;\n    this.page = 1;\n    this.per_page = 15;\n    this.totalResult = 0;\n  }\n\n  // Method getImages()\n\n  async getImages() {\n    const axios = Axios.create({\n      baseURL: this.BASE_URL,\n      params: {\n        key: PixabayAPI.#KEY,\n        q: this.q,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: this.per_page,\n        page: this.page,\n      },\n    });\n    const res = await axios.get('');\n    return res.data;\n  }\n\n  // Check the response from server (shoudn`t be empty)\n\n  isResponseEmpty(hits) {\n    const btnLoadMore = document.querySelector('.js-loadMore');\n    if (hits.length !== 0) {\n      btnLoadMore.classList.remove('hidden');\n      return hits;\n    } else {\n      btnLoadMore.classList.add('hidden');\n      return showNotification(notificationEmptyResponse);\n    }\n  }\n}\n","import { PixabayAPI } from './js/pixabay-api';\nimport {\n  showNotification,\n  createAndRenderGallery,\n} from './js/render-functions';\nimport iconError from './img/error.svg';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// List of links\n\nconst refs = {\n  form: document.querySelector('.form'),\n  btn: document.querySelector('.js-submitBtn'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  btnLoadMore: document.querySelector('.js-loadMore'),\n};\n\n// Notification Error object\n\nconst notificationError = {\n  title: 'Error',\n  message: 'We are sorry, but you have reached the end of search results.',\n  backgroundColor: '#ef4040',\n  icon: iconError,\n};\n\n// Create prototype\nconst pixabayApi = new PixabayAPI();\n\n// \"Load More\" and \"Loader\" is hidden.\nrefs.loader.classList.add('hidden');\nrefs.btnLoadMore.classList.add('hidden');\n\n// Event 'submit'\nrefs.form.addEventListener('submit', onGetImages);\nrefs.btnLoadMore.addEventListener('click', onLoadMore);\n\n// Fetching images by Submit Event\n\nasync function onGetImages(e) {\n  e.preventDefault();\n  refs.loader.classList.remove('hidden');\n  const inputValue = e.target.elements.formInput.value.trim().toLowerCase();\n  pixabayApi.q = inputValue;\n  pixabayApi.page = 1;\n\n  refs.gallery.innerHTML = '';\n  if (!pixabayApi.q) {\n    refs.loader.classList.add('hidden');\n    refs.btnLoadMore.classList.add('hidden');\n    refs.gallery.innerHTML = '';\n    notificationError.message =\n      'Please do your searching request, fill out the input';\n    return showNotification(notificationError);\n  }\n  try {\n    const { hits, ...rest } = await pixabayApi.getImages();\n    pixabayApi.totalResult = rest.total;\n    refs.loader.classList.add('hidden');\n    pixabayApi.isResponseEmpty(hits);\n    createAndRenderGallery(hits);\n    // let gallery = new SimpleLightbox('.gallery a', {\n    //   captionDelay: 250,\n    //   captionsData: 'alt',\n    // });\n    // gallery.refresh();\n    e.target.reset();\n  } catch (err) {\n    refs.loader.classList.add('hidden');\n    notificationError.message = err;\n    showNotification(notificationError);\n  }\n}\n\n// Load more by click on button\n\nasync function onLoadMore(e) {\n  try {\n    pixabayApi.page += 1;\n    const { hits, ...rest } = await pixabayApi.getImages();\n    refs.btnLoadMore.classList.add('hidden');\n    refs.loader.classList.remove('hidden');\n    createAndRenderGallery(hits);\n    checkButtonStatus();\n    smootherScrolling();\n  } catch (err) {\n    refs.loader.classList.add('hidden');\n    showNotification('Error', err, 'red', iconError);\n  }\n  refs.btnLoadMore.classList.remove('hidden');\n  refs.loader.classList.add('hidden');\n}\n\n// Checking the page number where you`re at.\n\nfunction checkButtonStatus() {\n  const maxPages = Math.ceil(pixabayApi.totalResult / pixabayApi.per_page);\n  const isLastPage = maxPages === pixabayApi.page;\n  if (isLastPage) {\n    notificationError.message =\n      'We are sorry, but you have reached the end of search results.';\n    showNotification(notificationError);\n    refs.btnLoadMore.classList.add('hidden');\n  }\n}\n\n// Smooth scrolling when \"Load more\" button is pressed.\n\nfunction smootherScrolling() {\n  const galleryItemRef = document.querySelector('.gallery__item');\n  const galleryItemDim = galleryItemRef.getBoundingClientRect();\n  const scrollByNum = galleryItemDim.height * 2 + galleryItemDim.height + 32;\n  window.scrollBy({\n    top: scrollByNum,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n"],"names":["iconCaution","showNotification","title","message","backgroundColor","icon","iziToast","createGalleryItemMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","createAndRenderGallery","obj","gallery","SimpleLightbox","markup","iconError","notificationEmptyResponse","_PixabayAPI","Axios","__privateGet","_KEY","hits","btnLoadMore","__privateAdd","PixabayAPI","refs","notificationError","pixabayApi","onGetImages","onLoadMore","e","inputValue","rest","err","checkButtonStatus","smootherScrolling","galleryItemDim","scrollByNum"],"mappings":"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"}